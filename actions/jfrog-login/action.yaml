name: "[Ledger Security] Login to JFrog"
description: "Ledger Security Action wrapper to login to JFrog"

outputs:
  jfrog-oidc-token:
    description: "From JFrog CLI: JFrog OIDC token generated by the Setup JFrog CLI when setting oidc-provider-name."
    value: ${{ setup-jfrog-cli.outputs.oidc-token }}
  jfrog-oidc-user:
    description: "From JFrog CLI: JFrog OIDC username from the OIDC token generated by the Setup JFrog CLI when setting oidc-provider-name."
    value: ${{ setup-jfrog-cli.outputs.oidc-user }}

runs:
  using: "composite"
  steps:
    - uses: jfrog/setup-jfrog-cli@v4
      id: setup-jfrog-cli
      env:
        JF_URL: "https://artifactory.ledgerlabs.net"
      with:
        oidc-provider-name: github
        oidc-audience: artifactory