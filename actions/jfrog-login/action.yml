name: "[Ledger Security] Login to JFrog"
author: LedgerHQ
description: "This action is used to login to the JFrog Plateform of Ledger (Artifactory, Xray, etc.)."

outputs:
  oidc-token:
    description: "From JFrog CLI: JFrog OIDC token generated by the Setup JFrog CLI when setting oidc-provider-name."
    value: ${{ steps.setup-jfrog-cli.outputs.oidc-token }}
  oidc-user:
    description: "From JFrog CLI: JFrog OIDC username from the OIDC token generated by the Setup JFrog CLI when setting oidc-provider-name."
    value: ${{ steps.setup-jfrog-cli.outputs.oidc-user }}
  jfrog-url:
    description: "Jfrog URL to be used for the JFrog API / CLI"
    value: "https://jfrog.ledgerlabs.net"

runs:
  using: "composite"
  steps:
    - uses: jfrog/setup-jfrog-cli@v4
      id: setup-jfrog-cli
      env:
        JF_URL: "https://jfrog.ledgerlabs.net"
      with:
        oidc-provider-name: github-oidc
        oidc-audience: jfrog-github